<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>* {box-sizing:border-box;}
   /* .wrap {
    height: 200px;
    padding: 25px;
    }
    .gradient {
        height: 150px;
    width: 50%;
    margin: 0 auto;
    border: 6px solid transparent;
    border-image: 10 repeating-linear-gradient(45deg, #fde539, #fbff22 21px, transparent 10px, transparent 3px, #f9f20f 0px, #dcde1c 35px,transparent 25px, transparent 35px);}
    */</style></head>

<body>
<div id="lottopage">
    <canvas id="sscanv" class="gradient" style="color: #635353;display: block;margin-left: auto;margin-right: auto;margin-top: 0vh;" width="300"height="300"></canvas>
   
</div>

<script>
var he = document.getElementById("sscanv").clientHeight;     
var wh = document.getElementById("sscanv").clientWidth;      
generateTicket("25",document.getElementById("sscanv"),wh,he,35,38)


//generateTicket(текст-приза,обьект-canvas,ширина,высота,кастом-размер-текста,кастом-Y-позиция-текста)
function generateTicket(prize,target,wii,hee,ttextSize,ttextY,lightGR,CR=0){
    var lightGRR = lightGR || 0;
    var textSize = Math.round (ttextSize*window.devicePixelRatio);
    var textY = Math.round (ttextY*window.devicePixelRatio);
    var wi = Math.round (wii*window.devicePixelRatio)
    var he = Math.round (hee*window.devicePixelRatio)
let txtSize = (textSize*10) || wi;
let txtY = (textY*2) || he;
let div = document.createElement('div');
  div.className = "none";
  div.innerHTML = '<canvas id="scanv15248"width="'+wi+'"height="'+he+'"></canvas><canvas id="scanv" width="'+wi+'"height="'+he+'"></canvas>';
  document.body.append(div);
var r = 1;
var costilctx =0;
var img;
 var lcanv = document.getElementById('scanv');
 var ctx = lcanv.getContext('2d');
 var coscanv = document.getElementById('scanv15248');
 var gtx = coscanv.getContext('2d');
 var dcos = target;
 var ssgtx = dcos.getContext('2d');
  Math.round ()
 dcos.width = wi;
 dcos.height = he;
 dcos.style.width = wii;
 dcos.style.height = wii;

 gradient = gtx.createLinearGradient(0, 0, wi, he,);
 /////////
gradient.addColorStop(0, "#dde005");
gradient.addColorStop(0.1, "#dde005");
gradient.addColorStop(0.2, "#dde005");
gradient.addColorStop(0.4, "#dde005");
gradient.addColorStop(0.6, "#dde005");
gradient.addColorStop(0.8, "#dde005");
gradient.addColorStop(1, "#dde005");
/////////
gtx.fillStyle = gradient;
gtx.fillRect(0, 0, wi, he);
gtx.strokeRect(0, 0, wi, he)
///////////

gtx.fillStyle = "black";
///////////

  

 genPatPhon(wi,he)
function genPatPhon(cnw,cnh){
    
    ctx.fillText("30.000", 105, 80);
    img = lcanv;
    
    ctx.beginPath();
    ctx.rect(0, 0, cnw, cnh);
    ctx.fillStyle = "#E7E7E7";
    ctx.fill();
    gradient = ctx.createLinearGradient(0, 0, wi, he);
            if(!lightGRR){
            gradient.addColorStop(0, "#195a21");
            gradient.addColorStop(0.2, "#154c1d");
            gradient.addColorStop(0.4, "#195a21");
            gradient.addColorStop(0.6, "#154c1d");
            gradient.addColorStop(0.8, "#195a21");
            gradient.addColorStop(1, "#154c1d");
            }else{
                gradient.addColorStop(0, "#195a21");
                gradient.addColorStop(1, "#154c1d");
            }
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, wi, he);
            ctx.strokeRect(0, 0, wi, he)
    ctx.fillStyle = "#000000";
    printUzor(); printUzor();   printUzor();    
    function printUzor(){var del = 10;
        let rt = wi / del;
        let mn = rt*randomInteger(1, del-1)
        ctx.beginPath();      
        ctx.moveTo(0, mn);    
        ctx.lineTo(he/del,mn ); 
        ctx.stroke();
        var lastposX = he/del;
        var lastposY = mn;
        var lock1 =1;
        var lock2 =1;
        var lock3 =1;
        for(let o =0;o<del;){
            var rr = randomInteger(1, 3)
            ctx.beginPath();      
            ctx.moveTo(lastposX, lastposY);
            if(rr == 1){
                if(lock1){
                    wayTop() 
                }else{wayMid();o=o+1;} 
            }else if(rr == 2){
                if(lock3){
                    wayDown() 
                }else{wayMid();o=o+1;} 
            }else if(rr == 3 ){o=o+1;
                wayMid();
            }
               
            ctx.lineTo(lastposX,lastposY); 
            ctx.stroke();

        }

        function wayTop(){
            if((lastposY - wi/del)>0){
            lastposY = lastposY - wi/del;
            lock1 = 1;
            lock2 = 1;
            lock3 = 0;
            }else{wayMid()}
        }
        function wayDown(){
            if((lastposY + he/del)<he){
            lastposY = lastposY + he/del;
            lock1 = 0;
            lock2 = 1;
            lock3 = 1;
            }else{wayMid()}
        }
        function wayMid(){
            lastposX = lastposX + wi/del;
            lock1 = 1;
            lock2 = 1;
            lock3 = 1;
        }

    }
    //for(let i = 0; i < 200; i++){
    //    ctx.fillRect(randomInteger(0, wi),randomInteger(0, he),0.5,0.5);
    //}
  

    ctx.mozImageSmoothingEnabled = false;ctx.webkitImageSmoothingEnabled = false;ctx.msImageSmoothingEnabled = false;ctx.imageSmoothingEnabled = false;    
    ctx.drawImage(lcanv, 0, 0);
    document.getElementById('scanv15248').remove();
    document.getElementById('scanv').remove();
    ssgtx.clearRect(0, 0, wi, he);
        ssgtx.drawImage(coscanv, 0, 0, wi, he);
        ssgtx.drawImage(lcanv, 0, 0, wi, he);
}
console.log( Math.ceil(wi/30))
var xscalerad = window.devicePixelRatio*1;
var rad =  5*xscalerad;
var onefive = Math.ceil(wi/15*xscalerad)+5*xscalerad;
var thrzero = Math.ceil(wi/30*xscalerad)/2/xscalerad;
function removearrea(x, y)
{       
         
        x = x * window.devicePixelRatio;
        y = y * window.devicePixelRatio;
        var imgData = ctx.getImageData(x-rad, y-rad, onefive, onefive);
        for(let Y = 0;Y<onefive;Y++){
            for(let X= 0; X<onefive;X++){
                if(((X - thrzero)*(X - thrzero)) + ((Y - thrzero)*(Y - thrzero)) <= (rad*rad)){
                    var id = (((Y*onefive)+X)*4)+3
                    imgData.data[id]=0;
                }
            }
        }
        ctx.putImageData(imgData, x-rad, y-rad);
        ssgtx.clearRect(0, 0, wi, he);
        ssgtx.drawImage(coscanv, 0, 0, wi, he);

        ssgtx.drawImage(lcanv, 0, 0, wi, he);
} 
            var control = false;
            dcos.addEventListener("touchstart", function (event) {
                control = true;
                event.preventDefault();
            }, false); 

            dcos.addEventListener("touchmove", function (event) {
                if(control){
                    var rect = event.target.getBoundingClientRect();
                    var x = event.targetTouches[0].pageX - rect.left;
                    var y = event.targetTouches[0].pageY - rect.top;
                removearrea(x, y)
                }
                event.preventDefault();
            }, false,{passive: false});

            dcos.addEventListener("touchend", function (event) {
               control = false;
               event.preventDefault();
            }, false);
///////
///////
            dcos.addEventListener('mousedown', function (event) {
                control = true;
            }, false);
            dcos.addEventListener('mousemove', function (event) {
                if(control){
                    var rect = event.target.getBoundingClientRect();
                    var x = event.pageX - rect.left;
                    var y = event.pageY - rect.top;
                removearrea(x, y)
                }
            }, false);
            dcos.addEventListener('mouseup', function (e) {

                control = false;
                e.preventDefault();
            });   
///////

function randomInteger(min, max) {
  let rand = min - 0.5 + Math.random() * (max - min + 1);
  return Math.round(rand);
}


}
</script>

</body></html>



<!-- function generateTicket(y,g,a,c,u,v){function x(d,f){for(var n=b.getImageData(d-h,f-h,m,m),p=0;p<m;p++)for(var q=0;q<m;q++)(q-r)*(q-r)+(p-r)*(p-r)<=h*h&&(n.data[4*(p*m+q)+3]=0);b.putImageData(n,d-h,f-h);k.clearRect(0,0,a,c);k.drawImage(w,0,0,a,c);k.drawImage(t,0,0,a,c)}u=10*u||a;v=2*v||c;var e=document.createElement("div");e.className="none";e.innerHTML='<canvas id="scanv15248"width="'+a+'"height="'+c+'"></canvas><canvas id="scanv" width="'+a+'"height="'+c+'"></canvas>';document.body.append(e);var t=
document.getElementById("scanv"),b=t.getContext("2d"),w=document.getElementById("scanv15248");e=w.getContext("2d");var k=g.getContext("2d");g.width=a;g.height=c;gradient=e.createLinearGradient(0,0,a,c);gradient.addColorStop(0,"#FFF");gradient.addColorStop(.1,"#F9F9F9");gradient.addColorStop(.2,"#F9F3F3");gradient.addColorStop(.4,"#EEE8E8");gradient.addColorStop(.6,"#FBFAFA");gradient.addColorStop(.8,"#F2EEEE");gradient.addColorStop(1,"#FFF");e.fillStyle=gradient;e.fillRect(0,0,a,c);e.strokeRect(0,
0,a,c);e.fillStyle="black";e.textAlign="center";e.font=u/10+"px Arial";e.fillText(y,a/2,v/2);e.strokeRect(0,0,a,c);(function(d,f){b.fillText("30.000",105,80);b.beginPath();b.rect(0,0,d,f);b.fillStyle="#E7E7E7";b.fill();gradient=b.createLinearGradient(0,0,a,c);gradient.addColorStop(0,"#bfbfbf");gradient.addColorStop(.2,"#e6e6e6");gradient.addColorStop(.4,"#d1d1d1");gradient.addColorStop(.6,"#f5f5f5");gradient.addColorStop(.8,"#c7c7c7");gradient.addColorStop(1,"#E7E7E7");b.fillStyle=gradient;b.fillRect(0,
0,a,c);b.strokeRect(0,0,a,c);b.fillStyle="#635353";for(var n=0;200>n;n++)b.fillRect(Math.round(-.5+Math.random()*(a-0+1)),Math.round(-.5+Math.random()*(c-0+1)),.5,.5);b.textAlign="center";250<a&&(b.font=a/30+"px Arial",b.fillText("SIMPLE ECONOMY",a/2,c/2-a/60),b.font=a/33,"3333333px Arial",b.fillText("REGULAR TICKET",a/2,c/2+a/60),b.font="25px Arial");b.mozImageSmoothingEnabled=!1;b.webkitImageSmoothingEnabled=!1;b.msImageSmoothingEnabled=!1;b.imageSmoothingEnabled=!1;b.drawImage(t,0,0);document.getElementById("scanv15248").remove();
document.getElementById("scanv").remove();k.clearRect(0,0,a,c);k.drawImage(w,0,0,a,c);k.drawImage(t,0,0,a,c)})(a,c);var h=Math.ceil(a/30),m=Math.ceil(a/15),r=Math.ceil(a/30),l=!1;g.addEventListener("touchstart",function(d){l=!0;d.preventDefault()},!1);g.addEventListener("touchmove",function(d){if(l){var f=d.target.getBoundingClientRect();x(d.targetTouches[0].pageX-f.left,d.targetTouches[0].pageY-f.top)}d.preventDefault()},!1,{passive:!1});g.addEventListener("touchend",function(d){l=!1;d.preventDefault()},
!1);g.addEventListener("mousedown",function(d){l=!0},!1);g.addEventListener("mousemove",function(d){if(l){var f=d.target.getBoundingClientRect();x(d.pageX-f.left,d.pageY-f.top)}},!1);g.addEventListener("mouseup",function(d){l=!1;d.preventDefault()})}; -->
